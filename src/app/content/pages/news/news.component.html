<div class="content-header-blue">
    <p>บันทึกข่าวสาร</p>
    <div class="underline-blue"></div>
</div>
<div class="content"  *ngIf="mode !== 'S'">
<form [formGroup]="newsFormGroup" (ngSubmit)="onSubmit()">
    <div class="row">

        <div class="col-xs-12">
            <div>
                <label class="normal">หัวข้อข่าว*</label>
            </div>
            <input pInputText
              formControlName="news_topic"
              [(ngModel)]="newsForm.smNews.news_topic"
              type="text">
        </div>

    </div>
    <div class="row">

        <div class="col-xs-12">
            <div>
                <label class="normal">รายละเอียดข่าว*</label>
            </div>
            <p-editor
              formControlName="news_detail"
              [(ngModel)]="newsForm.smNews.news_detail"
              [style]="{'height':'240px'}">
            </p-editor>
        </div>

    </div>
    <div class="row">

        <div class="col-xs-12">
            <div>
                <label class="normal">ภาพประกอบข่าว</label>
            </div>
            <label pButton
              class="btn-positive"
              label="อัพโหลด"
              (change)="onUpload($event)">
                <input type="file"
                  accept="image/*, application/pdf"
                  class="display-none">
            </label>
            <label>* รูปภาพต้องมีความกว้างไม่เกิน 870 พิกเซล</label>
        </div>

    </div>
    <div class="row">

        <div class="col-xs-3">
            <div>
                <label for="" class="normal">วันที่ประกาศ*</label>
            </div>
            <p-calendar
              [(ngModel)]="newsForm.smNews.publish_date"
              formControlName="publish_date"
              [showIcon]="true"
              [minDate]="minDate"
              [readonlyInput]="true">
            </p-calendar>
        </div>
        <div class="col-xs-1"></div>
        <div class="col-xs-2">
            <div>
                <label class="normal">สถานะ</label>
            </div>
            <p-dropdown
              name="active_flag"
              [options]="statusList"
              [style]="{'width':'150px'}"
              formControlName="active_flag">
            </p-dropdown>
        </div>
        <div class="col-xs-5"></div>
        <div class="col-xs-1"></div>
    </div>
    <div class="space"></div>
    <div class="row">

        <div class="col-xs-9">
            <button pButton
              type="submit"
              class="btn-positive"
              label="{{submitButton}}"
              [disabled]="!newsFormGroup.valid">
            </button>
            <button pButton
              type="button"
              class="btn-positive"
              label="เริ่มใหม่"
              (click)="resetForm()">
            </button>
            <button pButton
            type="button"
            class="ui-button-danger"
            label="ลบ">
          </button>
            <button pButton
              type="button"
              class="btn-positive"
              label="Preview"
              (click)="onPreview()">
            </button>
        </div>
        <div class="col-xs-3">
            <div style="text-align:right">
                <button pButton
                  type="button"
                  class="btn-positive"
                  label="กลับ"
                  (click)="onPageSearch()">
                </button>
            </div>
        </div>
        <div class="col-xs-1"></div>
    </div>
  </form>

<div *ngIf="preview">
  <div class="space"></div>
  <div class="row" >
    <div class="col-xs-1"></div>
    <div class="col-xs-10">
      <div>
        {{newsForm.smNews.news_topic}}
      </div>
      <div class="underline-blue"></div>
      <div class="space"></div>
     </div>
    <div class="col-xs-1"></div>
  </div>
  <div class="row">
    <div class="col-xs-1"></div>
    <div class="col-xs-10">
        <img src="{{newsForm.smNews.news_image}}" width="100%" height="100%">
    </div>
    <div class="col-xs-1"></div>
  </div>
  <div class="space"></div>
  <div class="row">
    <div class="col-xs-1"></div>
    <div class="col-xs-10">
      <div [innerHTML]="newsForm.smNews.news_detail"></div>
    </div>
    <div class="col-xs-1"></div>
  </div>
  <div class="space"></div>
  <div class="row">
    <div class="col-xs-1"></div>
    <div class="col-xs-10" style="text-align: right">
      วันที่ประกาศข่าว : {{previewDate}}
    </div>
    <div class="col-xs-1"></div>
  </div>
</div>
</div>

<div class="content"  *ngIf="mode === 'S'">
  <div class="row">
    <div class="col-xs-12">
      <div>
        <label class="normal">หัวข้อข่าว</label>
      </div>
      <input pInputText
        type="text"
        size="109"
        [(ngModel)]="criteriaNewsForm.smNews.news_topic"
        name="newsTopic">
    </div>
  </div>
  <div class="row">
    <div class="col-xs-10">
      <div>
        <label class="normal">วันที่ประกาศ</label>
      </div>
      <p-calendar
        id="startDate"
        [showIcon]="true"
        [(ngModel)]="criteriaNewsForm.startDate">
      </p-calendar>
      <label style="padding:0px 5px 0px 30px">ถึง </label>
      <p-calendar
        id="endDate"
        [showIcon]="true"
        [(ngModel)]="criteriaNewsForm.endDate">
      </p-calendar>
    </div>
    <div class="col-xs-2">

      <div>
        <label class="normal">สถานะ</label>
      </div>
      <div style="text-align:right">
      <p-dropdown
        name="active_flag"
        [options]="statusList"
        [style]="{'width':'105px','text-align':'center'}"
        [(ngModel)]="criteriaNewsForm.smNews.active_flag">
      </p-dropdown>
    </div>
    </div>
    <div class="col-xs-1"></div>
  </div>
  <div class="space"></div>
  <div class="row">
    <div class="col-xs-10">
        <button pButton
        type="button"
        class="btn-positive"
        label="ค้นหา"
        (click)="onSearchNews()">
      </button>
      <button pButton
        type="button"
        class="btn-positive"
        label="เริ่มใหม่"
        (click)="resetSearch()">
      </button>
    </div>
    <div class="col-xs-2">
      <div style="text-align:right">
        <button pButton
        type="button"
        class="btn-positive"
        label="เพิ่มใหม่"
        (click)="onInsertNews()">
      </button>
    </div>
    </div>
  </div>
  <div class="space"></div>
  <div class="row">
      <p-dataTable [value]="newsFormList"
                   selectionMode="single"
                   [(selection)]="newsSelected"
                   [rows]="10"
                   [paginator]="true"
                   [rowsPerPageOptions]="[5,10,20]"
                   (onRowSelect)="onRowSelect($event)"
                   sortMode="multiple">
        <p-column [sortable]="true"
                  field="smNews.publish_date"
                  header="วันที่ประกาศ"
                  [style]="{'width':'15%','text-align':'center'}"></p-column>
        <p-column [sortable]="true"
                  field="smNews.news_topic"
                  header="หัวข้อข่าว"></p-column>
        <p-column [sortable]="true"
                  field="smNews.active_flag"
                  [sortable]="true"
                  header="สถานะ"
                  [style]="{'width':'10%','text-align':'center'}">
        </p-column>
      </p-dataTable>
    </div>
</div>
